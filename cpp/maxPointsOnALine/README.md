Use a map to calculate gradient of every two points. Notice there are same points.     
Time complexity O(n^2logn), Space complexity O(n)