Record and sort or use priority_queue.    
Time complexity O(nlogn), Space complexity O(n)